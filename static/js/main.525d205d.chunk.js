(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),i=n(6),s=n.n(i),l=n(3),d="ADD_PAGE",o="REMOVE_PAGE",p="EXPEND_PAGE",u="DRAG_AND_DROP",j="SET_ACTIVE_PAGE",b="CHANGE_PAGE_NAME",g="CHANGE_BLOCK_NAME",h="REMOVE_BLOCK",x="ADD_BLOCK",O="New Page",v=!0,m=[],f=["New Block"],_=function(e){return{type:d,payload:e}},k=function(e){return{type:j,payload:e}},N=n(8),y=n(7),E=n.n(y),P=function(e,t){return e.type===d&&("left"===e.payload.position||"right"===e.payload.position)||e.type===o?t.length-1:t.length},A=function(e,t){return!e&&t.expanded?t.pages.length<=1?Object(a.jsx)("div",{className:"bottom-line"}):Object(a.jsxs)("div",{className:"bottom-line-curved",children:[Object(a.jsx)("div",{className:"left"}),Object(a.jsx)("div",{className:"right"})]}):null},C=function(e){return e===d||e===o||e===p||e===u||e===b||e===g||e===h||e===x},w=function(e,t,n){return 0===n&&e.length>1&&"0"!==t},D=function(e,t,n){return n===e.length-1&&0!==n&&"0"!==t},B=function(e,t){return 1===e.length&&"0"!==t},I=function(e,t,n){return 0!==n&&n<e.length-1&&"0"!==t},L=function(e){var t=e.page,n=e.pages,c=e.current_path,r=e.index,i=e.isActive,s=e.isLast,d=Object(l.c)();return Object(a.jsxs)(a.Fragment,{children:[w(n,c,r)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"left-line"}),Object(a.jsx)("div",{className:"action-btn add-page-from-left",onClick:function(e){e.stopPropagation(),d(k({current_path:null})),d(_({position:"left",current_path:c}))},children:"+"})]}),D(n,c,r)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"right-line"}),Object(a.jsx)("div",{className:"action-btn add-page-from-right",onClick:function(e){e.stopPropagation(),d(k({current_path:null})),d(_({position:"right",current_path:c}))},children:"+"})]}),B(n,c)&&Object(a.jsx)("div",{className:"action-btn add-page-from-left",onClick:function(e){e.stopPropagation(),d(k({current_path:null})),d(_({position:"left",current_path:c}))},children:"+"}),s?Object(a.jsx)("div",{className:"action-btn add-page-child",onClick:function(e){e.stopPropagation(),d(_({position:"child",current_path:c}))},children:"+"}):Object(a.jsx)("div",{className:"action-btn expand",onClick:function(e){e.stopPropagation(),d({type:p,payload:{current_path:c}})}}),(I(n,c,r)||B(n,c))&&Object(a.jsx)("div",{className:"middle-line"}),A(s,t),i&&Object(a.jsx)("div",{className:"action-btn remove-page",onClick:function(e){e.stopPropagation(),d(k({current_path:null})),d({type:o,payload:{current_path:c,index:r}})},children:"+"})]})},G=n(9),R=function(e){var t=e.page,n=e.current_path,c=e.isActive,r=Object(l.c)(),i=function(e,t){var a;r((a={current_path:n,value:e.target.value,index:t},{type:g,payload:a}))},s=function(e){r({type:h,payload:{current_path:n,index:e}})};return Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)("div",{className:"page-title",children:Object(a.jsx)("input",{type:"text",value:t.name,onChange:function(e){var t;r((t={current_path:n,value:e.target.value},{type:b,payload:t}))}})}),Object(a.jsx)(N.c,{droppableId:n,children:function(e){return Object(a.jsxs)("div",{ref:e.innerRef,children:[t.blocks.map((function(e,t){return Object(a.jsx)(N.b,{draggableId:n+"_"+t,index:t,children:function(n,r){return Object(a.jsx)("div",Object(G.a)(Object(G.a)(Object(G.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{children:Object(a.jsx)("div",{className:E()("block-name-container",{dragging:r.isDragging}),children:c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",value:e,onChange:function(e){return i(e,t)}}),Object(a.jsx)("div",{className:"action-btn remove-block",onClick:function(){return s(t)},children:"+"})]}):Object(a.jsx)("div",{className:"block-name",children:e})})}))}},t)})),e.placeholder]})}}),c&&Object(a.jsx)("div",{className:"action-btn add-block",onClick:function(){r({type:x,payload:{current_path:n}})},children:"+"})]})},F=function e(t){var n=t.pages,c=t.path,r=Object(l.c)(),i=Object(l.d)((function(e){return e.active})),s=function(e,t,c,s){var l=i&&i===c;return Object(a.jsx)("div",{className:E()("row",{"middle-element":I(n,c,e),"single-element":B(n,c),"single-middle-element":I(n,c,e)&&3===n.length,"left-element":w(n,c,e),"right-element":D(n,c,e)}),children:Object(a.jsxs)("div",{className:E()("page",{active:l}),onClick:function(e){e.stopPropagation(),r(k({current_path:c}))},children:[Object(a.jsx)(L,{page:t,pages:n,current_path:c,index:e,isActive:l,isLast:s}),Object(a.jsx)(R,{page:t,current_path:c,isActive:l}),!t.expanded&&Object(a.jsxs)("div",{className:"expended-borders",children:[Object(a.jsx)("div",{className:"expended-border"}),Object(a.jsx)("div",{className:"expended-border"})]})]})})};return Object(a.jsx)(a.Fragment,{children:n.map((function(t,n){var r="start"===c?"0":c+"."+n;return Object(a.jsx)("div",{className:"column",data:r,children:0===t.pages.length?s(n,t,r,!0):Object(a.jsxs)(a.Fragment,{children:[s(n,t,r,!1),t.expanded&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)(e,{pages:t.pages,path:r})})]})},r)}))})},S=(n(28),function(){var e=Object(l.d)((function(e){return e.page})),t=Object(l.c)(),n=function(){return t(k({current_path:null}))};Object(c.useEffect)((function(){return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}));return Object(a.jsx)("div",{id:"wrapper",children:Object(a.jsx)(N.a,{onDragEnd:function(e){var n,a=e.destination,c=e.source;null!==a&&t((n={current_path:a.droppableId,destination:a,source:c},{type:u,payload:n}))},children:Object(a.jsx)(F,{pages:e,path:"start"})})})}),T=(n(29),n(4)),M=n(5),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{name:"Main",expanded:!0,blocks:[],pages:[{name:"First",expanded:!0,blocks:["Block"],pages:[]},{name:"Second",expanded:!0,blocks:[],pages:[{name:"Page",expanded:!0,blocks:["Block","Block"],pages:[{name:"Page",expanded:!0,blocks:[],pages:[]}]}]},{name:"Third",expanded:!0,blocks:[],pages:[{name:"Page",expanded:!0,blocks:[],pages:[{name:"Page ",expanded:!1,blocks:[],pages:[{name:"Page",expanded:!0,blocks:[],pages:[]}]}]},{name:"Page",expanded:!0,blocks:["Block","Block","Block"],pages:[]}]}]}],t=arguments.length>1?arguments[1]:void 0;if(C(t.type)){var n=t.payload.current_path,a=[0];"0"!==n&&(a=n.split("."));for(var c=Object(M.a)(e),r=c,i=0;i<P(t,a);i++)r=0===i?r[a[i]]:r.pages[a[i]];switch(t.type){case d:switch(t.payload.position){case"left":r.pages.unshift({name:O,expanded:v,blocks:Object(M.a)(f),pages:Object(M.a)(m)});break;case"right":case"child":r.pages.push({name:O,expanded:v,blocks:Object(M.a)(f),pages:Object(M.a)(m)});break;default:return e}return c;case o:return"0"===t.payload.path?[]:(r.pages.splice(t.payload.index,1),c);case p:return r.expanded=!r.expanded,c;case u:var s=t.payload,l=s.destination,j=s.source,_=[0];"0"!==j.droppableId&&(_=j.droppableId.split("."));for(var k=c,N=0;N<_.length;N++)k=0===N?k[_[N]]:k.pages[_[N]];var y=k.blocks[j.index];return k.blocks.splice(j.index,1),r.blocks.splice(l.index,0,y),c;case b:return r.name=t.payload.value,c;case g:return r.blocks[t.payload.index]=t.payload.value,c;case h:return r.blocks.splice(t.payload.index,1),c;case x:return r.blocks.push("New Block"),c;default:return e}}return e},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.payload.current_path;default:return e}},H=Object(T.e)(Object(T.c)({page:V,active:X}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var K=function(){return Object(a.jsx)(l.a,{store:H,children:Object(a.jsx)(S,{})})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(K,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.525d205d.chunk.js.map